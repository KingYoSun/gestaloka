# プロジェクトブリーフ - ゲスタロカ (Gestaloka) v2.0

**最終更新日:** 2025/06/22  
**ドキュメントバージョン:** 2.0  
**主要変更:** ログ派遣システムとSPシステムの導入

## エグゼクティブサマリー

ゲスタロカは、LLMとグラフデータベースを活用した革新的なマルチプレイ・テキストMMOです。プレイヤーが編纂した「ログ」が独立したNPCとして世界を旅し、他のプレイヤーの物語に有機的に関わることで、無限に広がる物語体験を創造します。SP（Story Points）システムにより、持続可能な運営と深い物語体験の両立を実現します。

## プロジェクトゴール

### 短期目標（MVP - 3ヶ月）
- コアゲームサイクルの実装と検証
- ログ派遣システムの基本実装
- SPシステムによるマネタイズ基盤の確立
- 基本的な遭遇システムの実現

### 中期目標（6ヶ月）
- プレイヤーコミュニティの形成
- ログによる有機的な世界の成長
- 月額課金モデルの導入と最適化
- 月商100万円の達成

### 長期目標（1年）
- 自律的に成長する世界の実現
- 月間アクティブユーザー1万人
- 国際展開の準備
- 新しいゲームジャンルの確立

## MVP要件定義

### フェーズ1: 技術基盤（1ヶ月）✅ 完了

#### 達成済み
- ✅ Docker環境の構築
- ✅ KeyCloakによる認証システム
- ✅ FastAPIバックエンドの基本構造
- ✅ React/TypeScriptフロントエンドの基本構造
- ✅ PostgreSQL/Neo4jの連携
- ✅ WebSocket通信の実装
- ✅ LangChain統合

### フェーズ2: コアゲームプレイ（2ヶ月）✅ 完了

#### 達成済み
- ✅ キャラクター作成システム
- ✅ GM AI評議会の完全実装（6つのAI）
- ✅ ハイブリッド行動システム
- ✅ 基本的な戦闘システム
- ✅ ログ記録システム

### フェーズ3: ログシステムとSP基盤（1ヶ月）🚧 進行中

#### 必須機能
- ✅ ログの欠片システム
- ✅ ログ編纂インターフェース
- [ ] **SPシステム基盤**
  - [ ] SP残高管理と表示
  - [ ] 自然回復メカニズム（10 SP/日）
  - [ ] 行動時のSP消費実装
  - [ ] SP不足時の適切なフィードバック
- [ ] **ログ派遣システム**
  - [ ] 派遣UI（目的設定、期間設定、地点選択）
  - [ ] SP消費計算と確認画面
  - [ ] 派遣中のステータス表示
  - [ ] 簡易的な活動シミュレーション

#### 成功基準
- プレイヤーがSPを消費して行動できる
- ログを世界に派遣できる
- 派遣期間終了後に簡単な報告が見られる

### フェーズ4: マネタイズと遭遇システム（1ヶ月）

#### 必須機能
- [ ] **SP購入システム**
  - [ ] 購入画面UI
  - [ ] 決済プロバイダー統合（Stripe）
  - [ ] 購入履歴管理
  - [ ] セキュリティ対策
- [ ] **ログ活動エンジン**
  - [ ] AIによる自律的な行動決定
  - [ ] 他プレイヤーのセッションへの出現
  - [ ] 活動ログの詳細記録
- [ ] **基本的な遭遇システム**
  - [ ] ログNPCの識別表示
  - [ ] 簡単な対話システム
  - [ ] 遭遇記録の保存

#### 成功基準
- SPの購入が安全に行える
- ログが他のプレイヤーの世界に登場する
- 遭遇が両プレイヤーの記録に残る

### フェーズ5: バランス調整とリリース準備（2週間）

#### 必須機能
- [ ] **SPバランス調整**
  - [ ] 消費量の最適化
  - [ ] 報酬量の調整
  - [ ] 無料プレイの体験確保
- [ ] **UI/UXの洗練**
  - [ ] オンボーディング改善
  - [ ] SPシステムのチュートリアル
  - [ ] ログ派遣のガイド
- [ ] **品質保証**
  - [ ] 負荷テスト
  - [ ] セキュリティ監査
  - [ ] バグ修正

#### 成功基準
- 新規プレイヤーがSPシステムを理解できる
- 無料プレイでも楽しめる
- 安定したサービス提供

## 技術要件

### パフォーマンス目標
- API応答時間: 平均200ms以下
- LLM応答時間: 3秒以内
- 同時接続数: 500プレイヤー（MVP時点）
- SP処理: リアルタイム反映

### 新規技術要件
- **決済システム**
  - PCI DSS準拠
  - 複数通貨対応
  - サブスクリプション管理
- **ログ派遣エンジン**
  - 非同期処理（Celery）
  - スケーラブルなシミュレーション
  - リアルタイム状態同期

### セキュリティ
- JWT認証の実装 ✅
- API Rate Limiting（SP連動）
- 決済情報の安全な処理
- LLMプロンプトインジェクション対策 ✅

## リスクと緩和策

### 技術的リスク
| リスク | 影響度 | 緩和策 |
|--------|--------|--------|
| LLMコストの増大 | 高 | SPシステムでコストを転嫁 |
| 派遣シミュレーションの負荷 | 高 | バッチ処理とキャッシュ活用 |
| リアルタイム同期の複雑性 | 中 | イベントソーシング採用 ✅ |

### ビジネスリスク
| リスク | 影響度 | 緩和策 |
|--------|--------|--------|
| SPバランスの失敗 | 高 | A/Bテストと継続的調整 |
| 無料プレイヤーの離脱 | 高 | 十分な無料SP供給（10/日） |
| 課金への抵抗感 | 中 | 段階的な価値提供 |
| 派遣システムの複雑性 | 中 | 直感的UIとチュートリアル |

## 成功指標（KPI）

### MVP段階（3ヶ月）
- デイリーアクティブユーザー: 100人
- 平均プレイ時間: 45分/日
- ログ派遣数: 50回/日
- SP消費率: 80%以上
- システム稼働率: 99%以上

### 成長段階（6ヶ月）
- 月間アクティブユーザー: 2,000人
- プレイヤーリテンション率: 50%（30日）
- SP購入転換率: 10%
- 月額パス加入率: 5%
- 平均課金額: ¥1,500/月
- ログ遭遇数: 500回/日

### 収益目標
- 3ヶ月: 月商10万円
- 6ヶ月: 月商100万円
- 12ヶ月: 月商500万円

## 開発チーム構成

### 現在の体制
- AI支援開発（Claude Code）
- 個人開発者によるフルスタック開発

### 必要な追加リソース（将来）
- UI/UXデザイナー: 1名（3ヶ月目）
- コミュニティマネージャー: 1名（4ヶ月目）
- データアナリスト: 1名（6ヶ月目）

### 外部リソース
- LLM API（Gemini 2.5 Pro）
- 決済処理（Stripe）
- クラウドインフラ（MVP後）
- セキュリティ監査（リリース前）

## 更新されたタイムライン

```
Month 1-2: 基盤構築 ✅ 完了

Month 3: コアゲームプレイ ✅ 完了

Month 4: ログシステムとSP基盤（現在）
├─ Week 13-14: ログ編纂 ✅ 完了
├─ Week 15: SPシステム実装 ← 今ここ
├─ Week 16: ログ派遣基本機能

Month 5: マネタイズと遭遇
├─ Week 17: SP購入フロー
├─ Week 18: ログ活動エンジン
├─ Week 19: 遭遇システム
├─ Week 20: 統合テスト

Month 5.5: リリース準備
├─ Week 21: バランス調整
├─ Week 22: 最終QA
```

## 今後2週間の具体的タスク

### Week 15（今週）: SPシステム基盤
**月曜-火曜**
- [ ] SPデータモデルの実装（PlayerSP、SPTransaction）
- [ ] SP管理APIエンドポイント作成
- [ ] フロントエンドSP表示コンポーネント

**水曜-木曜**
- [ ] 自由行動入力のSP消費実装
- [ ] SP不足時のエラーハンドリング
- [ ] SP自然回復バッチ処理

**金曜**
- [ ] 統合テストとバグ修正
- [ ] ドキュメント更新

### Week 16（来週）: ログ派遣基本機能
**月曜-火曜**
- [ ] 派遣UIの実装（目的設定、期間選択）
- [ ] SP消費計算ロジック
- [ ] 派遣データモデル（LogDispatch）

**水曜-木曜**
- [ ] 簡易活動シミュレーション
- [ ] 帰還処理と報告画面
- [ ] 派遣中ステータス管理

**金曜**
- [ ] E2Eテスト作成
- [ ] パフォーマンステスト

## マネタイズ戦略

### 基本方針
- **Fair to Play**: 無料でも楽しめる
- **Pay to Experience More**: 課金でより深い体験
- **価値の可視化**: SPの使い道を明確に

### 収益源
1. **SP直接購入**: ¥500〜¥8,000
2. **月額パス**: ¥1,000〜¥2,500
3. **期間限定セール**: 20-40%ボーナス
4. **将来**: コスメティックアイテム

### 価格設定の根拠
- LLM APIコスト: 約¥0.5-1/行動
- サーバーコスト: 約¥50/ユーザー/月
- 利益率目標: 60%

## 成功への道筋

### 差別化要因
1. **ログの独立性**: 単なるデータではなく生きたNPC
2. **非同期的交流**: 時差を超えた有機的な出会い
3. **永続的影響**: プレイヤーの物語が世界に残る
4. **創造的プレイ**: 物語の作者としての体験

### 初期ユーザー獲得
1. **ゲーム系コミュニティ**: TRPG、テキストゲーム愛好家
2. **AI技術愛好家**: 最新技術への興味
3. **創作系コミュニティ**: 物語創造への関心
4. **インフルエンサー**: 実況プレイによる拡散

### 長期的成長
1. **コミュニティ駆動**: プレイヤー同士の物語共有
2. **定期イベント**: 限定ログ、特別報酬
3. **機能拡張**: ギルド、ログ交換
4. **国際展開**: 多言語対応

## 結論

ゲスタロカは、ログ派遣システムとSPシステムの導入により、より魅力的で持続可能なゲーム体験を提供します。技術的な基盤は整っており、今後はマネタイズシステムの実装とバランス調整に注力することで、革新的なマルチプレイ・テキストMMOとしての地位を確立します。