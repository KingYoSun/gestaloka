# 世界観・ゲームメカニクスドキュメントのリファクタリング

## 実施日時
2025-07-11 23:00 JST

## 概要
documents/03_worldbuilding以下のドキュメントの大規模リファクタリングを実施。ファイル名と内容の整合性確保、重複内容の整理、プロジェクトコンセプトとの整合性向上を目的とした。

## 実施内容

### 1. ファイル名と記述の整合性確保

#### explorationSystem.md
- **問題**: ファイル名は「探索システム」だが、2025-07-06に物語統合型に移行済み
- **修正**: タイトルを「物語内探索システム」に変更、内容を物語主導型に合わせて更新

#### log.md
- **問題**: ログシステム全体の内容が混在（編纂、SP、浄化など）
- **修正**: 基本的なログシステムのみに限定、詳細は各専門ドキュメントへの参照に

### 2. ファイル分割（500行超えファイルの整理）

#### memoryInheritance.md（524行）
- **分割前**: 記憶フラグメント獲得と継承システムが混在
- **分割後**:
  - `memoryFragmentAcquisition.md`（新規）: 記憶フラグメント獲得システム（156行）
  - `memoryInheritance.md`（修正）: 記憶継承システム（311行）

### 3. 用語統一

#### SP（ストーリーポイント）表記
- **修正ファイル数**: 8ファイル
- **統一内容**: 「ストーリーポイント」「Story Points」「SP（ストーリーポイント）」→「SP」

#### SP回復タイミング
- **統一内容**: 「毎日UTC 4時（日本時間午後1時）」に統一
- **修正箇所**: spSystem.md、logDispatchSystem.md、summary.md

#### フラグメントの用語使い分け
- **ログフラグメント**: ログ編纂用（log.md、basic.md等）
- **記憶フラグメント**: 記憶継承用（memoryInheritance.md、memoryFragmentAcquisition.md）
- **統一**: 「ログの欠片」→「ログフラグメント」

### 4. 重複内容の整理

#### SPシステムの重複
- **削除**: log.mdのセクション4（SPシステム）
- **参照先**: spSystem.md

#### 汚染浄化システムの重複
- **削除**: log.mdのセクション3.3.1、memoryInheritance.mdのセクション5.4の詳細
- **参照先**: purificationSystem.md

#### 高度な編纂メカニクスの重複
- **削除**: log.mdのセクション3.2.1、memoryInheritance.mdのセクション5.3の詳細
- **参照先**: advancedCompilation.md

### 5. プロジェクトコンセプトとの整合性向上

#### 物語主導型の体験強化
- **logDispatchSystem.md**: 遭遇確率の数値計算を物語的表現に変更
  - 変更前: 「基本遭遇確率: 30%」「修正値+50%」など
  - 変更後: 「積極的に人を探し、出会いを求める」など

#### 存在しないファイルへの参照削除
- **titleSystem.md**: characterGrowth.md、socialSystem.mdへの参照を削除

### 6. 「他世界」設定の削除（追加作業）

プロジェクト当初の「他世界」設定の名残を発見し削除：

#### 修正箇所
- **summary.md**: 「他世界影響」→「世界への影響」
- **log.md**: 「お互いの世界に」→「同じゲスタロカ世界の中でお互いに」
- **basic.md**: 
  - 「他のプレイヤーの世界へ派遣」→「ゲスタロカ世界へ派遣」
  - 「他者の世界で活躍」→「世界各地で活躍」
  - 「他者の世界に影響を与える」→「同じ世界で活動する他のプレイヤーに影響を与える」

## 成果

### 定量的成果
- **修正ファイル数**: 12ファイル
- **削除行数**: 462行
- **追加行数**: 298行
- **新規ファイル**: 1個（memoryFragmentAcquisition.md）

### 定性的成果
1. **一貫性の向上**: ファイル名と内容が完全に一致
2. **可読性の向上**: 重複がなくなり、参照構造が明確に
3. **保守性の向上**: 各システムが独立したファイルで管理
4. **物語性の強化**: 数値的表現を物語的表現に統一

## コミット情報

### コミット1
```
docs: 世界観・ゲームメカニクスドキュメントの大規模リファクタリング
- 用語統一、ファイル分割、重複削除、物語性強化
```

### コミット2
```
fix: 「他世界」設定の名残を削除
- 単一世界（ゲスタロカ）での実装に統一
```

## 今後の課題
- spSystem.mdやpurificationSystem.mdの数値的記述を開発者向けドキュメントに分離することを検討
- プレイヤー向けの物語的な説明と、開発者向けの技術的な説明の分離

## 関連ファイル
- `/documents/03_worldbuilding/summary.md` - 更新されたサマリー
- `/documents/03_worldbuilding/game_mechanics/summary.md` - 更新されたメカニクスサマリー
- `/documents/03_worldbuilding/game_mechanics/memoryFragmentAcquisition.md` - 新規作成