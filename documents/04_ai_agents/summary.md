# GM AI評議会サマリー

最終更新: 2025-07-02

## 概要
GM AI評議会は、ゲスタロカの物語生成と世界管理を担う6つの専門AIエージェントの集合体です。各AIは独自の役割と責任範囲を持ち、協調して豊かな物語体験を創出します。

## 評議会構成

### 🎭 脚本家AI (Dramatist)
- **役割**: 物語の進行とテキスト生成
- **責務**: 状況描写、NPC対話、選択肢生成
- **特徴**: 文学的表現と感情的深度を重視

### 📊 状態管理AI (State Manager)  
- **役割**: ゲームルールの判定とDB管理
- **責務**: 行動判定、状態更新、整合性維持
- **特徴**: 厳密性と公平性を重視

### 📚 歴史家AI (Historian)
- **役割**: 世界の記録と歴史編纂
- **責務**: ログ記録、因果関係追跡、歴史構築
- **特徴**: 詳細な記録と長期的視点

### 👥 NPC管理AI (NPC Manager)
- **役割**: 永続的NPCの生成と管理
- **責務**: NPC創造、性格設定、関係性管理
- **特徴**: キャラクターの一貫性と成長

### 🌍 世界の意識AI (The World)
- **役割**: マクロイベントと世界変化
- **責務**: 大規模イベント、環境変化、運命操作
- **特徴**: 壮大なスケールと長期的影響

### 🎲 混沌AI (The Anomaly)
- **役割**: 予測不能なイベント生成
- **責務**: ランダムイベント、バグ的現象、奇跡
- **特徴**: 予測不能性と驚きの要素

## 協調動作プロトコル

### 基本フロー
1. **脚本家AI**が状況を描写し選択肢を提示
2. **状態管理AI**がプレイヤーの行動を判定
3. **歴史家AI**が結果を記録し因果関係を更新
4. 必要に応じて他のAIが介入（NPC登場、世界イベント、混沌要素）

### 情報共有
- 共通コンテキスト：世界状態、キャラクター情報、履歴
- AI間通信：データベース経由での非同期通信
- 優先順位：状態整合性 > 物語性 > 驚き要素

## 実装状況（2025/07/02）
✅ **完全実装**: 
- 全6エージェントの基本実装と協調動作
- 物語主導型移動システムとの統合
- ログ遭遇システム（複数NPC、アイテム交換）
- AIレスポンスキャッシュ（コスト20-30%削減）

🎆 **最近の改善**:
- Gemini 2.5 Proへの統一（langchain-google-genai 2.1.6）
- フラグメント生成の強化（125種類以上のキーワード）
- 動的な遭遇確率計算の実装

## ドキュメント一覧

### gm_ai_spec/
各AIエージェントの詳細仕様：
- [dramatist.md](gm_ai_spec/dramatist.md) - 脚本家AI仕様
- [state_manager.md](gm_ai_spec/state_manager.md) - 状態管理AI仕様
- [historian.md](gm_ai_spec/historian.md) - 歴史家AI仕様
- [npc_manager.md](gm_ai_spec/npc_manager.md) - NPC管理AI仕様
- [the_world.md](gm_ai_spec/the_world.md) - 世界の意識AI仕様
- [anomaly.md](gm_ai_spec/anomaly.md) - 混沌AI仕様

## 最新の強化点

### 物語主導型移動
- 脈絡に沿った行動選択肢の生成
- 移動と物語進行の自然な統合
- ミニマップとの連携（view-onlyモード）

### ログ遭遇の高度化
- 目的タイプ・性格・汚染度による確率調整
- 複数NPCの同時出現と相互作用
- アイテム交換の価値バランス計算

## クイックリファレンス

- AI実装時：該当するAIの仕様書で役割と責務を確認
- 協調動作：各AIの`他AIとの連携`セクションを参照
- プロンプト設計：各仕様書の`プロンプト設計`セクションを活用