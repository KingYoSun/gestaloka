# ゲスタロカ (GESTALOKA) プロジェクトサマリー

最終更新: 2025年6月29日

## プロジェクト概要

**ゲスタロカ**は、LLMとグラフデータベースを活用した革新的なマルチプレイ・テキストMMOです。プレイヤーの行動がログとして記録され、他のプレイヤーの世界にNPCとして影響を与える独自のシステムを特徴としています。

### コアコンセプト
- **動的物語生成**: 固定シナリオではなく、AIとプレイヤーの相互作用による創発的な物語
- **ログシステム**: プレイヤーの行動履歴が永続的に世界に影響を与える
- **階層世界**: 7つの階層からなる独特な世界観「ゲスタロカ」
- **AI協調**: 6つの専門AIが協力してゲーム世界を管理

## 技術スタック

### バックエンド
- Python 3.11 + FastAPI
- PostgreSQL（構造化データ）+ Neo4j（グラフデータ）
- Celery + Redis（非同期処理）
- LangChain + Gemini 2.5 Pro（AI処理）

### フロントエンド
- TypeScript + React 19
- TanStack Router/Query
- shadcn/ui
- WebSocket（リアルタイム通信）

## 開発状況（2025年6月29日時点）

### 完了機能
- ✅ 認証・ユーザー管理（Keycloak統合）
- ✅ キャラクター作成・管理
- ✅ ゲームセッション（リアルタイム物語生成）
- ✅ SPシステム（行動ポイント管理）
- ✅ SP購入システム（課金機能の基礎）
- ✅ ログ記録・派遣システム
- ✅ ログNPC遭遇システム
- ✅ 基本的な戦闘システム
- ✅ GM AI評議会（6つのAIエージェント）

### 進行中
- 🔄 ログ編纂機能
- 🔄 高度な戦闘・スキルシステム
- 🔄 AIプロンプト最適化

### 計画中
- 📅 ログマーケットプレイス
- 📅 ギルドシステム
- 📅 PvP要素
- 📅 モバイル対応

## アーキテクチャの特徴

### マイクロサービス風モノリス
- 単一リポジトリで管理しつつ、機能は明確に分離
- 将来的なマイクロサービス化を見据えた設計

### ポリグロットパーシステンス
- PostgreSQL: ゲームデータ、ユーザー情報、ログ
- Neo4j: エンティティ間の関係性、NPC
- Redis: セッション、キャッシュ、メッセージブローカー

### AI統合アーキテクチャ
- LangChainによる統一的なAI管理
- 専門性を持つ6つのAIエージェントの協調
- プロンプトエンジニアリングの一元管理

## 開発ガイドライン

### コーディング規約
- Python: PEP 8準拠、型ヒント必須
- TypeScript: 厳格な型定義、any型の使用禁止
- テスト: 新機能には必ずテストを追加

### デプロイメント
- Docker Composeによる開発環境
- Alembicによるデータベースマイグレーション
- GitHub Actionsによる自動テスト（準備中）

## プロジェクト構造

```
gestaloka/
├── backend/          # FastAPIアプリケーション
├── frontend/         # Reactアプリケーション
├── documents/        # プロジェクトドキュメント
├── docker-compose.yml
└── CLAUDE.md        # AI開発アシスタント用ガイド
```

## 最近の更新

### 2025年6月29日
- SP購入システムの実装完了
- 開発環境のエラー修正（型チェック、リント）
- SP購入サービスの同期実装への変換

## 連絡先・リソース

- リポジトリ: [プライベート]
- ドキュメント: `/documents/`
- 開発ガイド: `/CLAUDE.md`

---

詳細なドキュメントは各ディレクトリの`summary.md`を参照してください。